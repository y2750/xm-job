<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.example.mapper.ProjectPaymentMapper">
    <insert id="insert" parameterType="com.example.entity.ProjectPayment" useGeneratedKeys="true" keyProperty="id">
        insert into project_payment (project_id, enterprise_id, freelancer_id, deposit_amount, full_amount, freelancer_deposit, paid_amount, status, created_at, updated_at)
        values (#{projectId}, #{enterpriseId}, #{freelancerId}, #{depositAmount}, #{fullAmount}, #{freelancerDeposit}, #{paidAmount}, #{status}, #{createdAt}, #{updatedAt})
    </insert>
    
    <update id="updateById" parameterType="com.example.entity.ProjectPayment">
        update project_payment
        <set>
            <if test="depositAmount != null">deposit_amount = #{depositAmount},</if>
            <if test="fullAmount != null">full_amount = #{fullAmount},</if>
            <if test="freelancerDeposit != null">freelancer_deposit = #{freelancerDeposit},</if>
            <if test="paidAmount != null">paid_amount = #{paidAmount},</if>
            <if test="status != null">status = #{status},</if>
            <if test="freelancerId != null">freelancer_id = #{freelancerId},</if>
            <if test="updatedAt != null">updated_at = #{updatedAt}</if>
        </set>
        where id = #{id}
    </update>
    
    <select id="selectByProjectId" resultType="com.example.entity.ProjectPayment">
        select * from project_payment where project_id = #{projectId}
    </select>
</mapper>

